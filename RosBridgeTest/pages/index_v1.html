<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ROSBridge Game Controller</title>
  <!-- Include roslibjs from a CDN -->
  <script src="https://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
</head>
<body>
  <h1>Game Controller Data</h1>
  <p id="status">Connecting to ROS...</p>
  <p id="joyData">No data yet.</p>

  <script>
    // Create a connection to ROS
    var ros = new ROSLIB.Ros({
      url : 'ws://localhost:9090'
    });

    // Connection event listeners
    ros.on('connection', function() {
      document.getElementById('status').innerText = 'Connected to ROSBridge.';
      console.log('Connected to websocket server.');
    });

    ros.on('error', function(error) {
      document.getElementById('status').innerText = 'Error connecting to ROSBridge.';
      console.error('Error connecting to websocket server: ', error);
    });

    ros.on('close', function() {
      document.getElementById('status').innerText = 'Connection to ROSBridge closed.';
      console.log('Connection to websocket server closed.');
    });

    // Subscribe to the /joy topic
    var joyListener = new ROSLIB.Topic({
      ros : ros,
      name : '/joy',
      messageType : 'sensor_msgs/msg/joy'
    });

    joyListener.subscribe(function(message) {
      console.log('Received message on /joy:', message);

      // For this example, we display the first two axes.
      // Modify as needed for your controller.
      var axesInfo = message.axes.length > 1 ?
                     'Axis 0: ' + message.axes[0].toFixed(2) + ', Axis 1: ' + message.axes[1].toFixed(2) :
                     'Insufficient axis data';

      document.getElementById('joyData').innerText = axesInfo;
    });
  </script>
</body>
</html>

