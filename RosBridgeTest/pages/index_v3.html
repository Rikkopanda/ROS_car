<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ROSBridge Debug</title>
  <!-- Load roslibjs -->
  <script src="https://github.com/RobotWebTools/roslibjs/blob/ros2/build/roslib.js"></script>
</head>
<body>
  <h1>ROSBridge Debug</h1>
  <div id="status">Connecting...</div>
  <pre id="joyData">No data yet.</pre>

  <script>
    // Make sure the library is loaded
    if (typeof ROSLIB === 'undefined') {
      document.getElementById('status').innerText = 'ROSLIB not loaded!';
      console.error('ROSLIB not loaded!');
    } else {
      // Initialize the connection to ROSBridge
      var ros = new ROSLIB.Ros({
        url : 'ws://127.0.0.1:9090'
      });

      ros.on('connection', function() {
        document.getElementById('status').innerText = 'Connected to ROSBridge.';
        console.log('Connected to ROSBridge.');
      });

      ros.on('error', function(error) {
        document.getElementById('status').innerText = 'Error connecting to ROSBridge.';
        console.error('Connection error:', error);
      });

      ros.on('close', function() {
        document.getElementById('status').innerText = 'Connection to ROSBridge closed.';
        console.log('Connection closed.');
      });

      // Subscribe to the /joy topic
      var joyListener = new ROSLIB.Topic({
        ros : ros,
        name : '/joy',
        messageType : 'sensor_msgs/msg/Joy'
      });

      joyListener.subscribe(function(message) {
        console.log('Received message on /joy:', message);
        document.getElementById('joyData').innerText = JSON.stringify(message, null, 2);
      });
    }
  </script>
</body>
</html>

